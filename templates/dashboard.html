<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Pocket Option Signals</title>
  <style>
    body { background:#0b1220; color:#e5f0ff; font-family:sans-serif; margin:0; }
    header { padding:1em; background:#0f172a; display:flex; justify-content:space-between; }
    .btn { background:#38bdf8; color:#00111f; padding:8px 12px; border-radius:8px; text-decoration:none; border:none; cursor:pointer }
    .card { background:#0f172a; margin:1em 0; padding:1em; border-radius:10px; }
    input,textarea { width:100%; background:#0b1220; color:#e5f0ff; border:1px solid #24324a; border-radius:8px; padding:8px }
    label { display:block; margin:8px 0 4px; }
  </style>
</head>
<body>
<header>
  <div><b>Pocket Option Signals</b></div>
  <nav>
    {% if session.get('admin') %}
      <a class="btn" href="{{ url_for('dashboard.dashboard') }}">Dashboard</a>
      <a class="btn" href="{{ url_for('dashboard.logout') }}">Logout</a>
    {% else %}
      <a class="btn" href="{{ url_for('dashboard.login') }}">Login</a>
    {% endif %}
  </nav>
</header>
<main style="max-width:900px;margin:auto;padding:1em">

{% if view=="login" %}
<div class="card">
  <h2>Admin Login</h2>
  <form method="post">
    <label>Password</label>
    <input type="password" name="password"/>
    <button class="btn" type="submit">Login</button>
  </form>
</div>

{% elif view=="index" %}
<div class="card">
  <h2>Welcome</h2>
  <p>Use the dashboard to set strategies, pairs, and run backtests.</p>
  <p>Now: {{ now }} ({{ tz }})</p>
</div>

{% else %}
<div class="card">
  <h2>Trading Window</h2>
  <form method="post" action="{{ url_for('dashboard.update_window') }}">
    <label>Start</label><input name="start" value="{{ window.start }}">
    <label>End</label><input name="end" value="{{ window.end }}">
    <label>Timezone</label><input name="timezone" value="{{ window.timezone }}">
    <button class="btn">Save</button>
  </form>
</div>

<div class="card">
  <h2>Strategies</h2>
  <form method="post" action="{{ url_for('dashboard.update_strategies') }}">
    {% for name, opts in strategies.items() %}
      <label><input type="checkbox" name="s_{{name}}" {% if opts.enabled %}checked{% endif %}/> {{ name }}</label>
    {% endfor %}
    <button class="btn">Save</button>
  </form>
</div>

<div class="card">
  <h2>Active Symbols</h2>
  <form method="post" action="{{ url_for('dashboard.update_symbols') }}">
    <textarea name="symbols" rows="3">{{ active_symbols|join(" ") }}</textarea>
    <button class="btn">Save</button>
  </form>
</div>

<div class="card">
  <h2>Live Control</h2>
  <form method="post" action="/live/start" style="display:inline"><button class="btn">Start Live</button></form>
  <form method="post" action="/live/stop" style="display:inline"><button class="btn">Stop Live</button></form>
  <form method="post" action="/telegram/test" style="display:inline"><button class="btn">Send Telegram Test</button></form>
  <div style="margin-top:8px"><a class="btn" href="/live/status">Check Status (JSON)</a></div>
</div>
{% endif %}

</main>
</body>
</html>
